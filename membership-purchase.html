<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be Well Reserve™ Memberships - Be Well LifeStyle Centers</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // Initialize Stripe
        const stripe = Stripe('pk_live_51JFk2OLeFHoi9neBTLR6uDHCFKQhj8izByCvifayl1SJuTkrnpMOvukln7e1ZVP36EPBwAq2FVUxuEJuLbod9JMM00EOkZEkO5');
        
        // Stripe Price IDs
        const stripePrices = {
            'restore': 'price_1RcG9kLeFHoi9neBS2g9QaLb',
            'revive': 'price_1RcGDWLeFHoi9neBqZ7MrZDy',
            'renew': 'price_1RcGECLeFHoi9neBBTJKdYSH',
            'total-wellness': 'price_1RcGEsLeFHoi9neBWeGknCVv'
        };
    </script>
    <style>
        .reserve-explanation {
            background: var(--card-bg);
            border: 1px solid rgba(164, 124, 91, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .reserve-explanation h3 {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .reserve-explanation p {
            color: var(--text-color);
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .reserve-explanation em {
            color: #9ca3af;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <style>
        /* COMPREHENSIVE GLOWING BALL ELIMINATION */
        
        /* Target ALL circular elements from styles.css */
        .pulse-ring,
        .logo-animation,
        .floating-element,
        .orb,
        .glow,
        .glowing-ball,
        .particle,
        .journey-particle,
        .point-indicator,
        .user-avatar,
        .card-icon,
        .chat-btn,
        *[class*="glow"],
        *[class*="ball"],
        *[class*="orb"],
        *[class*="particle"],
        *[class*="spinner"] {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }
        
        /* Remove any pseudo-elements that might create the glowing ball */
        *::before,
        *::after {
            content: none !important;
            display: none !important;
        }
        
        /* Hide any circular elements with white/light backgrounds */
        *[style*="border-radius: 50%"],
        *[style*="border-radius:50%"],
        *[style*="background: white"],
        *[style*="background:white"],
        *[style*="background-color: white"],
        *[style*="background-color:white"] {
            display: none !important;
        }
        
        /* Disable all CSS animations that might create the glowing effect */
        * {
            animation: none !important;
            transition: none !important;
        }
        
        /* Override main styles.css spinner that could be inherited */
        .spinner {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            animation: none !important;
        }
        
        /* Override particle animations from styles.css */
        .particle,
        .journey-particle {
            display: none !important;
            animation: none !important;
        }
        
        /* Override pulse ring animations */
        .pulse-ring {
            display: none !important;
            animation: none !important;
        }
        
        /* Hide splash video elements */
        .splash-screen,
        #splash-video,
        #splash-container,
        .white-disc {
            display: none !important;
        }
        
        /* Remove any glowing background elements */
        body::before,
        body::after,
        .membership-cards::before,
        .membership-cards::after,
        .membership-card::before,
        .membership-card::after {
            display: none !important;
        }
        
        /* Reset background to default */
        body {
            background: var(--bg-color) !important;
        }
        
        /* Remove any radial gradients that might create the glowing ball */
        .membership-cards,
        .membership-card {
            background-image: none !important;
        }
        
        /* Hide ALL possible circular elements */
        .spinner,
        .loading-spinner,
        canvas,
        .particle,
        .glow,
        .orb,
        .floating-element,
        *[class*="dot"],
        *[class*="circle"],
        *[class*="ball"],
        *[class*="particle"] {
            display: none !important;
        }
        
        /* Force hide any absolute positioned elements that could be the ball */
        div[style*="position: absolute"],
        div[style*="position: fixed"] {
            display: none !important;
        }
        
        /* Hide Stripe loading elements */
        .__PrivateStripeElement,
        .StripeElement,
        [class*="stripe"],
        [id*="stripe"],
        iframe[src*="stripe"],
        .stripe-loading,
        .stripe-spinner {
            display: none !important;
        }
        
        /* Target specific white circular elements that could be blocking mobile */
        *[style*="border-radius: 50%"][style*="background: white"],
        *[style*="border-radius:50%"][style*="background:white"],
        div[style*="position: absolute"][style*="background: white"],
        div[style*="position: fixed"][style*="background: white"],
        div[style*="z-index"][style*="border-radius: 50%"] {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* Ensure membership cards have clean positioning */
        .membership-card {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        /* Mobile-specific nuclear option */
        @media (max-width: 768px) {
            /* On mobile, hide ALL circular elements regardless of class */
            *[style*="border-radius: 50%"],
            *[style*="border-radius:50%"] {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
            }
            
            /* Force remove any element that could be creating the mobile white dot */
            div, span, button, img, canvas, svg {
                border-radius: 0 !important;
            }
            
            div[style*="position: fixed"],
            div[style*="position: absolute"] {
                border-radius: 0 !important;
            }
        }
    </style>
    
    <script>
        // Hunt for the glowing white ball
        function killGlowingBall() {
            // Find all elements that could be the glowing ball
            const allElements = document.querySelectorAll('*');
            allElements.forEach(el => {
                const style = window.getComputedStyle(el);
                const rect = el.getBoundingClientRect();
                
                // Check for white/light colored circular elements
                if ((style.backgroundColor.includes('white') || 
                     style.backgroundColor.includes('rgb(255') ||
                     style.borderColor.includes('white') ||
                     style.borderColor.includes('rgb(255') ||
                     style.background?.includes('white') ||
                     el.style.background?.includes('white') ||
                     el.style.backgroundColor?.includes('white')) &&
                    (style.borderRadius === '50%' || 
                     style.borderRadius.includes('50%') ||
                     el.style.borderRadius === '50%' ||
                     el.style.borderRadius?.includes('50%'))) {
                    
                    console.log('Hiding potential glowing ball:', el);
                    el.style.display = 'none !important';
                    el.style.visibility = 'hidden !important';
                    el.style.opacity = '0 !important';
                }
                
                // Also check for any element positioned behind membership cards
                if (rect.width > 0 && rect.height > 0 && rect.width < 200 && rect.height < 200) {
                    const membershipCards = document.querySelector('.membership-cards');
                    if (membershipCards) {
                        const cardsRect = membershipCards.getBoundingClientRect();
                        // If element is positioned behind or within membership cards area
                        if (rect.left >= cardsRect.left && rect.right <= cardsRect.right &&
                            rect.top >= cardsRect.top && rect.bottom <= cardsRect.bottom) {
                            // And if it's circular or has glow effects
                            if (style.borderRadius.includes('50%') || 
                                style.boxShadow.includes('glow') ||
                                el.className.includes('glow') ||
                                el.className.includes('ball') ||
                                el.className.includes('orb')) {
                                console.log('Hiding element behind membership cards:', el);
                                el.style.display = 'none !important';
                            }
                        }
                    }
                }
            });
            
            // Remove any canvas elements that might be drawing the ball
            const canvases = document.querySelectorAll('canvas');
            canvases.forEach(canvas => {
                console.log('Hiding canvas element:', canvas);
                canvas.style.display = 'none !important';
            });
        }
        
        // Run immediately and repeatedly
        killGlowingBall();
        document.addEventListener('DOMContentLoaded', killGlowingBall);
        setTimeout(killGlowingBall, 500);
        setTimeout(killGlowingBall, 1000);
        setTimeout(killGlowingBall, 2000);
        setTimeout(killGlowingBall, 3000);
        
        // Monitor for new elements being added
        const observer = new MutationObserver(killGlowingBall);
        observer.observe(document.body, { childList: true, subtree: true });
        
        // More aggressive Stripe and overlay hunting
        function hideBlockingElements() {
            // Look for Stripe-specific elements
            document.querySelectorAll('iframe[src*="stripe"], [class*="stripe"], [id*="stripe"]').forEach(el => {
                console.log('Hiding Stripe element:', el);
                el.style.display = 'none !important';
            });
            
            // Look for any overlay elements that could be blocking mobile
            document.querySelectorAll('*').forEach(el => {
                const style = getComputedStyle(el);
                const rect = el.getBoundingClientRect();
                
                // If element covers a large area (potential overlay)
                if (rect.width > window.innerWidth * 0.5 || rect.height > window.innerHeight * 0.5) {
                    if (style.position === 'fixed' || style.position === 'absolute') {
                        if (style.backgroundColor.includes('white') || 
                            style.background.includes('white') ||
                            style.borderRadius.includes('50%')) {
                            console.log('Hiding large blocking element:', el);
                            el.style.display = 'none !important';
                        }
                    }
                }
                
                // Target high z-index white circular elements
                const zIndex = parseInt(style.zIndex);
                if (zIndex > 100 && style.borderRadius.includes('50%') && 
                    (style.backgroundColor.includes('white') || style.backgroundColor.includes('rgb(255'))) {
                    console.log('Hiding high z-index ball element:', el);
                    el.style.display = 'none !important';
                }
            });
        }
        
        // Mobile-specific element detection
        function detectMobileBlockingElement() {
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // On mobile, look for elements that could be blocking text
                document.querySelectorAll('*').forEach(el => {
                    const rect = el.getBoundingClientRect();
                    const style = getComputedStyle(el);
                    
                    // Check if element is in the area where "Complete Wellness" text should be
                    const explanationSection = document.querySelector('.reserve-explanation');
                    if (explanationSection) {
                        const textRect = explanationSection.getBoundingClientRect();
                        
                        // If element overlaps with the text area and is circular or white
                        if (rect.left < textRect.right && rect.right > textRect.left &&
                            rect.top < textRect.bottom && rect.bottom > textRect.top) {
                            
                            if (style.borderRadius.includes('50%') || 
                                style.backgroundColor.includes('white') ||
                                style.background.includes('white') ||
                                (rect.width < 100 && rect.height < 100 && Math.abs(rect.width - rect.height) < 20)) {
                                
                                console.log('MOBILE BLOCKING ELEMENT DETECTED:', el);
                                console.log('Element position:', rect);
                                console.log('Element styles:', style.position, style.zIndex, style.backgroundColor, style.borderRadius);
                                el.style.display = 'none !important';
                                el.style.visibility = 'hidden !important';
                                el.style.opacity = '0 !important';
                            }
                        }
                    }
                });
            }
        }
        
        // Run very frequently to catch dynamic elements
        setInterval(hideBlockingElements, 100);
        setInterval(killGlowingBall, 200);
        setInterval(detectMobileBlockingElement, 50); // Mobile-specific detection
    </script>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo-section">
                <img src="logo.svg" alt="Be Well Logo" class="logo">
            </a>
        </div>
        <button style="position: fixed; top: 20px; right: 20px; background: var(--primary-color); color: white; padding: 8px 16px; border: none; border-radius: 0px; cursor: pointer; font-size: 0.9rem; z-index: 1000;" onclick="window.location.href='index.html'">
            <i class="fas fa-home"></i> Home
        </button>
    </nav>

    <main class="membership-purchase-container">
        <h1>Unlock Your Wellness Potential</h1>
        <p style="text-align: center; color: #9ca3af; font-size: 1.1rem; margin-bottom: 30px;">Be Well Reserve™ Memberships - Flexible Services, Real Savings, Banking Credits</p>
        
        <div class="reserve-explanation">
            <h3>Complete Wellness. Flexible Benefits. Real Savings.</h3>
            <p>Whether you're here for regular massages, chiropractic care, IV therapy, or exploring everything we offer - our memberships give you <strong>flexible service allowances, 10% savings, and banking credits</strong> for ultimate wellness freedom.</p>
            <p><strong>Be Well Reserve credits:</strong> Earn 10% cashback monthly. Use like cash toward any service.</p>
            <p><em>Reserve credits expire after 6 months • Non-transferable • Cannot be redeemed for cash</em></p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(164, 124, 91, 0.2);"><strong>Membership Terms:</strong> All memberships automatically renew monthly until cancelled. You can easily manage or cancel your subscription anytime through the member portal or by contacting us.</p>
        </div>
        
        <div class="membership-cards">
            <div class="membership-card" data-membership="restore" data-price="149">
                <h2>Restore</h2>
                <div class="price">$149<span>/month</span></div>
                <ul>
                    <li>$14.90 Be Well Reserve credits earned monthly</li>
                    <li>10% off all services</li>
                    <li>Pick ONE free service per month</li>
                    <li>1 free café item monthly</li>
                </ul>
                <button class="select-membership" onclick="selectMembership('restore')">Select Restore</button>
            </div>

            <div class="membership-card" data-membership="revive" data-price="299">
                <h2>Revive</h2>
                <div class="price">$299<span>/month</span></div>
                <ul>
                    <li>$29.90 Be Well Reserve credits earned monthly</li>
                    <li>10% off all services</li>
                    <li>Pick TWO free services per month</li>
                    <li>1 free café item monthly</li>
                </ul>
                <button class="select-membership" onclick="selectMembership('revive')">Select Revive</button>
            </div>

            <div class="membership-card popular" data-membership="renew" data-price="499">
                <div class="popular-badge">MOST POPULAR</div>
                <h2>Renew</h2>
                <div class="price">$499<span>/month</span></div>
                <ul>
                    <li>$49.90 Be Well Reserve credits earned monthly</li>
                    <li>10% off all services</li>
                    <li>Pick THREE free services per month</li>
                    <li>2 free café items monthly</li>
                </ul>
                <button class="select-membership" onclick="selectMembership('renew')">Select Renew</button>
            </div>

            <div class="membership-card" data-membership="total-wellness" data-price="799">
                <h2>Total Wellness</h2>
                <div class="price">$799<span>/month</span></div>
                <ul>
                    <li>$79.90 Be Well Reserve credits earned monthly</li>
                    <li>10% off all services</li>
                    <li>Pick FIVE free services per month</li>
                    <li>1 free café item weekly</li>
                </ul>
                <button class="select-membership" onclick="selectMembership('total-wellness')">Select Total Wellness</button>
            </div>
        </div>

        <div class="value-examples" style="background: var(--card-bg); border-radius: 12px; padding: 30px; margin: 40px 0; border: 1px solid rgba(164, 124, 91, 0.2);">
            <h3 style="color: var(--primary-color); text-align: center; margin-bottom: 25px;">See Your Savings in Action</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px;">
                
                <div style="text-align: center; padding: 20px;">
                    <h4 style="color: white; margin-bottom: 15px;">Regular Massage Client</h4>
                    <div style="color: #9ca3af; font-size: 0.9rem; line-height: 1.6;">
                        <p>2 monthly massages: <span style="text-decoration: line-through;">$230</span></p>
                        <p><strong style="color: var(--primary-color);">Revive Membership: $299</strong></p>
                        <p>✓ 2 massage services included<br>
                        ✓ 10% off everything<br>
                        ✓ $29.90 monthly credits<br>
                        ✓ Café perks</p>
                    </div>
                </div>

                <div style="text-align: center; padding: 20px;">
                    <h4 style="color: white; margin-bottom: 15px;">Wellness Explorer</h4>
                    <div style="color: #9ca3af; font-size: 0.9rem; line-height: 1.6;">
                        <p>Massage + IV + Chiro: <span style="text-decoration: line-through;">$455</span></p>
                        <p><strong style="color: var(--primary-color);">Renew Membership: $499</strong></p>
                        <p>✓ 3 services of your choice<br>
                        ✓ 10% off everything<br>
                        ✓ $49.90 monthly credits<br>
                        ✓ 2 café items monthly</p>
                    </div>
                </div>

                <div style="text-align: center; padding: 20px;">
                    <h4 style="color: white; margin-bottom: 15px;">Total Wellness Lifestyle</h4>
                    <div style="color: #9ca3af; font-size: 0.9rem; line-height: 1.6;">
                        <p>Mix of all services: <span style="text-decoration: line-through;">$800+</span></p>
                        <p><strong style="color: var(--primary-color);">Total Wellness: $799</strong></p>
                        <p>✓ 5 services monthly<br>
                        ✓ 10% off everything<br>
                        ✓ $79.90 monthly credits<br>
                        ✓ Weekly café items</p>
                    </div>
                </div>

            </div>
            <p style="text-align: center; color: #9ca3af; font-size: 0.9rem; margin-top: 20px; font-style: italic;">
                Examples based on standard service pricing. Choose any services that fit your wellness goals.
            </p>
        </div>

        <div id="checkout-form" style="display: none;">
            <h2>Complete Your Membership</h2>
            <form id="membership-form">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <button type="submit" id="checkout-button" class="btn-primary">
                    Proceed to Payment
                </button>
            </form>
        </div>

        <div class="loading-spinner" id="loading" style="display: none !important; visibility: hidden !important; opacity: 0 !important;">
            <div class="spinner" style="display: none !important;"></div>
            <p>Processing...</p>
        </div>

    </main>

    <script>
        let selectedMembership = null;
        
        // Function to select membership
        function selectMembership(membershipType) {
            selectedMembership = membershipType;
            
            // Remove previous selections
            document.querySelectorAll('.membership-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            const selectedCard = document.querySelector(`[data-membership="${membershipType}"]`);
            selectedCard.classList.add('selected');
            
            // Create Stripe checkout session
            createCheckoutSession(membershipType);
        }
        
        // Create Stripe checkout session
        async function createCheckoutSession(membershipType) {
            const priceId = stripePrices[membershipType];
            
            if (!priceId) {
                alert('Error: Invalid membership type selected');
                return;
            }
            
            // Show loading (disabled to prevent white ball)
            // document.getElementById('loading').style.display = 'flex';
            
            try {
                // Create the checkout URL directly
                const checkoutUrl = `https://buy.stripe.com/test_XXXX?price=${priceId}`;
                
                // For now, redirect to Stripe's payment link directly
                // You'll need to create payment links in Stripe dashboard for each membership
                redirectToStripePaymentLink(membershipType);
                
            } catch (error) {
                console.error('Checkout error:', error);
                alert('Error processing payment. Please try again.');
                // document.getElementById('loading').style.display = 'none'; // Loading disabled
            }
        }
        
        // Redirect to Stripe Payment Links
        function redirectToStripePaymentLink(membershipType) {
            const paymentLinks = {
                'restore': 'https://buy.stripe.com/eVq6oI3KEbHrais8DtgQE01',
                'revive': 'https://buy.stripe.com/14A8wQepi5j362c7zpgQE02',
                'renew': 'https://buy.stripe.com/bJe9AU2GAeTD8akbPFgQE03',
                'total-wellness': 'https://buy.stripe.com/fZu8wQ80U6n776gf1RgQE04'
            };
            
            const paymentUrl = paymentLinks[membershipType];
            
            if (paymentUrl) {
                // Hide loading and redirect to Stripe (already disabled)
                // document.getElementById('loading').style.display = 'none';
                window.location.href = paymentUrl;
            } else {
                // Fallback if something goes wrong (loading already disabled)
                // document.getElementById('loading').style.display = 'none';
                alert('Error: Please call us at (248) 792-6570 to sign up.');
            }
        }
    </script>
    
    <style>
        .membership-card.selected {
            border: 2px solid var(--primary-color);
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(164, 124, 91, 0.3);
        }
        
        .loading-spinner {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .spinner {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-spinner p {
            color: white;
            margin-top: 20px;
            font-size: 1.2rem;
        }
    </style>
</body>
</html>